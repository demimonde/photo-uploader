(function(){function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function m(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function ca(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}function p(a){return a instanceof Array?a:ca(m(a))}var da="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},q;
if("function"==typeof Object.setPrototypeOf)q=Object.setPrototypeOf;else{var r;a:{var ea={w:!0},fa={};try{fa.__proto__=ea;r=fa.w;break a}catch(a){}r=!1}q=r?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ha=q;
function t(a,b){a.prototype=da(b.prototype);a.prototype.constructor=a;if(ha)ha(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(b,c);f&&Object.defineProperty(a,c,f)}else a[c]=b[c]}var v="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,ia="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
function ja(a,b){if(b){var c=v;a=a.split(".");for(var f=0;f<a.length-1;f++){var e=a[f];e in c||(c[e]={});c=c[e]}a=a[a.length-1];f=c[a];b=b(f);b!=f&&null!=b&&ia(c,a,{configurable:!0,writable:!0,value:b})}}
ja("Promise",function(a){function b(d){this.b=0;this.g=void 0;this.a=[];var h=this.c();try{d(h.resolve,h.reject)}catch(g){h.reject(g)}}function c(){this.a=null}function f(d){return d instanceof b?d:new b(function(h){h(d)})}if(a)return a;c.prototype.b=function(d){if(null==this.a){this.a=[];var h=this;this.c(function(){h.g()})}this.a.push(d)};var e=v.setTimeout;c.prototype.c=function(d){e(d,0)};c.prototype.g=function(){for(;this.a&&this.a.length;){var d=this.a;this.a=[];for(var h=0;h<d.length;++h){var g=
d[h];d[h]=null;try{g()}catch(l){this.f(l)}}}this.a=null};c.prototype.f=function(d){this.c(function(){throw d;})};b.prototype.c=function(){function d(l){return function(n){g||(g=!0,l.call(h,n))}}var h=this,g=!1;return{resolve:d(this.N),reject:d(this.f)}};b.prototype.N=function(d){if(d===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(d instanceof b)this.O(d);else{a:switch(typeof d){case "object":var h=null!=d;break a;case "function":h=!0;break a;default:h=!1}h?this.I(d):this.i(d)}};
b.prototype.I=function(d){var h=void 0;try{h=d.then}catch(g){this.f(g);return}"function"==typeof h?this.P(h,d):this.i(d)};b.prototype.f=function(d){this.j(2,d)};b.prototype.i=function(d){this.j(1,d)};b.prototype.j=function(d,h){if(0!=this.b)throw Error("Cannot settle("+d+", "+h+"): Promise already settled in state"+this.b);this.b=d;this.g=h;this.F()};b.prototype.F=function(){if(null!=this.a){for(var d=0;d<this.a.length;++d)k.b(this.a[d]);this.a=null}};var k=new c;b.prototype.O=function(d){var h=this.c();
d.m(h.resolve,h.reject)};b.prototype.P=function(d,h){var g=this.c();try{d.call(h,g.resolve,g.reject)}catch(l){g.reject(l)}};b.prototype.then=function(d,h){function g(x,y){return"function"==typeof x?function(G){try{l(x(G))}catch(ba){n(ba)}}:y}var l,n,u=new b(function(x,y){l=x;n=y});this.m(g(d,l),g(h,n));return u};b.prototype.catch=function(d){return this.then(void 0,d)};b.prototype.m=function(d,h){function g(){switch(l.b){case 1:d(l.g);break;case 2:h(l.g);break;default:throw Error("Unexpected state: "+
l.b);}}var l=this;null==this.a?k.b(g):this.a.push(g)};b.resolve=f;b.reject=function(d){return new b(function(h,g){g(d)})};b.race=function(d){return new b(function(h,g){for(var l=m(d),n=l.next();!n.done;n=l.next())f(n.value).m(h,g)})};b.all=function(d){var h=m(d),g=h.next();return g.done?f([]):new b(function(l,n){function u(G){return function(ba){x[G]=ba;y--;0==y&&l(x)}}var x=[],y=0;do x.push(void 0),y++,f(g.value).m(u(x.length-1),n),g=h.next();while(!g.done)})};return b});
function ka(){ka=function(){};v.Symbol||(v.Symbol=la)}function ma(a,b){this.a=a;ia(this,"description",{configurable:!0,writable:!0,value:b})}ma.prototype.toString=function(){return this.a};var la=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new ma("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();
function na(){ka();var a=v.Symbol.iterator;a||(a=v.Symbol.iterator=v.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&ia(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return oa(aa(this))}});na=function(){}}function oa(a){na();a={next:a};a[v.Symbol.iterator]=function(){return this};return a}function pa(){this.c=!1;this.a=null;this.j=void 0;this.f=1;this.i=0;this.b=null}function qa(a){if(a.c)throw new TypeError("Generator is already running");a.c=!0}
pa.prototype.g=function(a){this.j=a};function ra(a,b){a.b={B:b,D:!0};a.f=a.i}pa.prototype.return=function(a){this.b={return:a};this.f=this.i};function sa(a){this.a=new pa;this.b=a}function ta(a,b){qa(a.a);var c=a.a.a;if(c)return ua(a,"return"in c?c["return"]:function(f){return{value:f,done:!0}},b,a.a.return);a.a.return(b);return w(a)}
function ua(a,b,c,f){try{var e=b.call(a.a.a,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.a.c=!1,e;var k=e.value}catch(d){return a.a.a=null,ra(a.a,d),w(a)}a.a.a=null;f.call(a.a,k);return w(a)}function w(a){for(;a.a.f;)try{var b=a.b(a.a);if(b)return a.a.c=!1,{value:b.value,done:!1}}catch(c){a.a.j=void 0,ra(a.a,c)}a.a.c=!1;if(a.a.b){b=a.a.b;a.a.b=null;if(b.D)throw b.B;return{value:b.return,done:!0}}return{value:void 0,done:!0}}
function va(a){this.next=function(b){qa(a.a);a.a.a?b=ua(a,a.a.a.next,b,a.a.g):(a.a.g(b),b=w(a));return b};this.throw=function(b){qa(a.a);a.a.a?b=ua(a,a.a.a["throw"],b,a.a.g):(ra(a.a,b),b=w(a));return b};this.return=function(b){return ta(a,b)};na();this[Symbol.iterator]=function(){return this}}function wa(a){function b(f){return a.next(f)}function c(f){return a.throw(f)}return new Promise(function(f,e){function k(d){d.done?f(d.value):Promise.resolve(d.value).then(b,c).then(k,e)}k(a.next())})}
function xa(a){return wa(new va(new sa(a)))}ja("String.prototype.repeat",function(a){return a?a:function(b){if(null==this)throw new TypeError("The 'this' value for String.prototype.repeat must not be null or undefined");var c=this;if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var f="";b;)if(b&1&&(f+=c),b>>>=1)c+=c;return f}});try{window.preact=preact}catch(a){window.preact={}}var ya=window.preact,z=ya.h,A=ya.Component,za=ya.render;function Aa(a,b,c){for(var f=[],e=0,k=b;k<b+c;k++)f[e]="0x"+a.getUint8(k).toString(16),e++;a="";var d=f.length;for(b=0;b<d;)switch(c=f[b++],c>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(c);break;case 12:case 13:e=f[b++];a+=String.fromCharCode((c&31)<<6|e&63);break;case 14:e=f[b++],k=f[b++],a+=String.fromCharCode((c&15)<<12|(e&63)<<6|(k&63)<<0)}return a}
function B(a,b,c,f,e){var k=a.getUint16(c,!e),d={},h;for(h=0;h<k;h++){var g=c+12*h+2;var l=f[a.getUint16(g,!e)];d[l]=Ba(a,g,b,e)}return d}
function Ba(a,b,c,f){var e=a.getUint16(b+2,!f),k=a.getUint32(b+4,!f);c=a.getUint32(b+8,!f)+c;switch(e){case 1:case 7:if(1==k)return a.getUint8(b+8);c=4<k?c:b+8;b=[];for(e=0;e<k;e++)b[e]=a.getUint8(c+e);return b;case 2:return Aa(a,4<k?c:b+8,k-1);case 3:if(1==k)return a.getUint16(b+8,!f);c=2<k?c:b+8;b=[];for(e=0;e<k;e++)b[e]=a.getUint16(c+2*e,!f);return b;case 4:if(1==k)return a.getUint32(b+8,!f);b=[];for(e=0;e<k;e++)b[e]=a.getUint32(c+4*e,!f);return b;case 5:if(1==k){var d=a.getUint32(c,!f);var h=
a.getUint32(c+4,!f);a=new Number(d/h);a.H=d;a.A=h;return a}b=[];for(e=0;e<k;e++)d=a.getUint32(c+8*e,!f),h=a.getUint32(c+4+8*e,!f),b[e]=new Number(d/h),b[e].H=d,b[e].A=h;return b;case 9:if(1==k)return a.getInt32(b+8,!f);b=[];for(e=0;e<k;e++)b[e]=a.getInt32(c+4*e,!f);return b;case 10:if(1==k)return a.getInt32(c,!f)/a.getInt32(c+4,!f);b=[];for(e=0;e<k;e++)b[e]=a.getInt32(c+8*e,!f)/a.getInt32(c+4+8*e,!f);return b}};var C={},Ca=(C[120]="Caption-Abstract",C[110]="Credit",C[25]="Keywords",C[55]="DateCreated",C[80]="By-line",C[85]="By-lineTitle",C[122]="Writer-Editor",C[105]="Headline",C[116]="CopyrightNotice",C[15]="Category",C);var D={},Da=(D[256]="ImageWidth",D[257]="ImageHeight",D[258]="BitsPerSample",D[259]="Compression",D[262]="PhotometricInterpretation",D[273]="StripOffsets",D[274]="Orientation",D[277]="SamplesPerPixel",D[278]="RowsPerStrip",D[279]="StripByteCounts",D[282]="XResolution",D[283]="YResolution",D[284]="PlanarConfiguration",D[296]="ResolutionUnit",D[513]="JpegIFOffset",D[514]="JpegIFByteCount",D[529]="YCbCrCoefficients",D[530]="YCbCrSubSampling",D[531]="YCbCrPositioning",D[532]="ReferenceBlackWhite",D);var E={},Ea=(E[256]="ImageWidth",E[257]="ImageHeight",E[34665]="ExifIFDPointer",E[34853]="GPSInfoIFDPointer",E[40965]="InteroperabilityIFDPointer",E[258]="BitsPerSample",E[259]="Compression",E[262]="PhotometricInterpretation",E[274]="Orientation",E[277]="SamplesPerPixel",E[284]="PlanarConfiguration",E[530]="YCbCrSubSampling",E[531]="YCbCrPositioning",E[282]="XResolution",E[283]="YResolution",E[296]="ResolutionUnit",E[273]="StripOffsets",E[278]="RowsPerStrip",E[279]="StripByteCounts",E[513]="JPEGInterchangeFormat",
E[514]="JPEGInterchangeFormatLength",E[301]="TransferFunction",E[318]="WhitePoint",E[319]="PrimaryChromaticities",E[529]="YCbCrCoefficients",E[532]="ReferenceBlackWhite",E[306]="DateTime",E[270]="ImageDescription",E[271]="Make",E[272]="Model",E[305]="Software",E[315]="Artist",E[33432]="Copyright",E);var F={},Fa=(F[36864]="ExifVersion",F[40960]="FlashpixVersion",F[40961]="ColorSpace",F[40962]="PixelXDimension",F[40963]="PixelYDimension",F[37121]="ComponentsConfiguration",F[37122]="CompressedBitsPerPixel",F[37500]="MakerNote",F[37510]="UserComment",F[40964]="RelatedSoundFile",F[36867]="DateTimeOriginal",F[36868]="DateTimeDigitized",F[37520]="SubsecTime",F[37521]="SubsecTimeOriginal",F[37522]="SubsecTimeDigitized",F[33434]="ExposureTime",F[33437]="FNumber",F[34850]="ExposureProgram",F[34852]="SpectralSensitivity",
F[34855]="ISOSpeedRatings",F[34856]="OECF",F[37377]="ShutterSpeedValue",F[37378]="ApertureValue",F[37379]="BrightnessValue",F[37380]="ExposureBias",F[37381]="MaxApertureValue",F[37382]="SubjectDistance",F[37383]="MeteringMode",F[37384]="LightSource",F[37385]="Flash",F[37396]="SubjectArea",F[37386]="FocalLength",F[41483]="FlashEnergy",F[41484]="SpatialFrequencyResponse",F[41486]="FocalPlaneXResolution",F[41487]="FocalPlaneYResolution",F[41488]="FocalPlaneResolutionUnit",F[41492]="SubjectLocation",
F[41493]="ExposureIndex",F[41495]="SensingMethod",F[41728]="FileSource",F[41729]="SceneType",F[41730]="CFAPattern",F[41985]="CustomRendered",F[41986]="ExposureMode",F[41987]="WhiteBalance",F[41988]="DigitalZoomRation",F[41989]="FocalLengthIn35mmFilm",F[41990]="SceneCaptureType",F[41991]="GainControl",F[41992]="Contrast",F[41993]="Saturation",F[41994]="Sharpness",F[41995]="DeviceSettingDescription",F[41996]="SubjectDistanceRange",F[40965]="InteroperabilityIFDPointer",F[42016]="ImageUniqueID",F);var H={},Ga=(H[0]="GPSVersionID",H[1]="GPSLatitudeRef",H[2]="GPSLatitude",H[3]="GPSLongitudeRef",H[4]="GPSLongitude",H[5]="GPSAltitudeRef",H[6]="GPSAltitude",H[7]="GPSTimeStamp",H[8]="GPSSatellites",H[9]="GPSStatus",H[10]="GPSMeasureMode",H[11]="GPSDOP",H[12]="GPSSpeedRef",H[13]="GPSSpeed",H[14]="GPSTrackRef",H[15]="GPSTrack",H[16]="GPSImgDirectionRef",H[17]="GPSImgDirection",H[18]="GPSMapDatum",H[19]="GPSDestLatitudeRef",H[20]="GPSDestLatitude",H[21]="GPSDestLongitudeRef",H[22]="GPSDestLongitude",
H[23]="GPSDestBearingRef",H[24]="GPSDestBearing",H[25]="GPSDestDistanceRef",H[26]="GPSDestDistance",H[27]="GPSProcessingMethod",H[28]="GPSAreaInformation",H[29]="GPSDateStamp",H[30]="GPSDifferential",H);function Ha(a){var b=m(a.split(/\D/));a=b.next().value;var c=b.next().value,f=b.next().value,e=b.next().value,k=b.next().value;b=b.next().value;return new Date(a,c-1,f,e,k,b)};function Ia(a,b,c){c=void 0===c?{}:c;var f=void 0===c.coordinates?"dms":c.coordinates,e=void 0===c.parseDates?!1:c.parseDates;if("Exif"!=Aa(a,b,4))return!1;c=b+6;if(18761==a.getUint16(c))var k=!1;else if(19789==a.getUint16(c))k=!0;else return!1;if(42!=a.getUint16(c+2,!k))return!1;var d=a.getUint32(c+4,!k);if(8>d)return!1;b=B(a,c,c+d,Ea,k);e&&b.DateTime&&(b.DateTime=Ha(b.DateTime));var h=b.ExifIFDPointer,g=b.GPSInfoIFDPointer;if(h)for(u in h=B(a,c,c+h,Fa,k),h){var l=h[u];switch(u){case "LightSource":case "Flash":case "MeteringMode":case "ExposureProgram":case "SensingMethod":case "SceneCaptureType":case "SceneType":case "CustomRendered":case "WhiteBalance":case "GainControl":case "Contrast":case "Saturation":case "Sharpness":case "SubjectDistanceRange":case "FileSource":l=
I[u][l];break;case "DateTimeOriginal":case "DateTimeDigitized":e&&(l=Ha(l));break;case "ExifVersion":case "FlashpixVersion":l=String.fromCharCode(l[0],l[1],l[2],l[3]);break;case "ComponentsConfiguration":l=I.Components[l[0]]+I.Components[l[1]]+I.Components[l[2]]+I.Components[l[3]]}b[u]=l}if(g){e=B(a,c,c+g,Ga,k);for(u in e){g=e[u];switch(u){case "GPSVersionID":var n=m(g);g=n.next().value;h=n.next().value;l=n.next().value;n=n.next().value;g=[g,h,l,n].join(".")}b[u]=g}if("dd"==f){if(b.GPSLongitude){e=
m(b.GPSLongitude);var u=e.next().value;f=e.next().value;e=e.next().value;g=b.GPSLongitudeRef;b.GPSLongitude=(u+f/60+e/3600)*("S"==g||"W"==g?-1:1)}b.GPSLatitude&&(e=m(b.GPSLatitude),u=e.next().value,f=e.next().value,e=e.next().value,g=b.GPSLatitudeRef,b.GPSLatitude=(u+f/60+e/3600)*("S"==g||"W"==g?-1:1))}}d=c+d;u=a.getUint16(d,!k);if(d=a.getUint32(d+2+12*u,!k))if(d>a.byteLength)a={};else{d=B(a,c,c+d,Da,k);if(d.Compression)switch(d.Compression){case 6:d.v&&d.u&&(d.blob=new Blob([new Uint8Array(a.buffer,
c+d.v,d.u)],{type:"image/jpeg"}));break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",d.Compression)}else 2==d.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");a=d}else a={};b.thumbnail=a;return b}
var J={},K={},L={},M={},N={},O={},Ja={},Ka={},La={},P={},Q={},R={},S={},T={},Ma={},U={},I={ExposureProgram:(J[0]="Not defined",J[1]="Manual",J[2]="Normal program",J[3]="Aperture priority",J[4]="Shutter priority",J[5]="Creative program",J[6]="Action program",J[7]="Portrait mode",J[8]="Landscape mode",J),MeteringMode:(K[0]="Unknown",K[1]="Average",K[2]="CenterWeightedAverage",K[3]="Spot",K[4]="MultiSpot",K[5]="Pattern",K[6]="Partial",K[255]="Other",K),LightSource:(L[0]="Unknown",L[1]="Daylight",L[2]=
"Fluorescent",L[3]="Tungsten (incandescent light)",L[4]="Flash",L[9]="Fine weather",L[10]="Cloudy weather",L[11]="Shade",L[12]="Daylight fluorescent (D 5700 - 7100K)",L[13]="Day white fluorescent (N 4600 - 5400K)",L[14]="Cool white fluorescent (W 3900 - 4500K)",L[15]="White fluorescent (WW 3200 - 3700K)",L[17]="Standard light A",L[18]="Standard light B",L[19]="Standard light C",L[20]="D55",L[21]="D65",L[22]="D75",L[23]="D50",L[24]="ISO studio tungsten",L[255]="Other",L),Flash:(M[0]="Flash did not fire",
M[1]="Flash fired",M[5]="Strobe return light not detected",M[7]="Strobe return light detected",M[9]="Flash fired, compulsory flash mode",M[13]="Flash fired, compulsory flash mode, return light not detected",M[15]="Flash fired, compulsory flash mode, return light detected",M[16]="Flash did not fire, compulsory flash mode",M[24]="Flash did not fire, auto mode",M[25]="Flash fired, auto mode",M[29]="Flash fired, auto mode, return light not detected",M[31]="Flash fired, auto mode, return light detected",
M[32]="No flash function",M[65]="Flash fired, red-eye reduction mode",M[69]="Flash fired, red-eye reduction mode, return light not detected",M[71]="Flash fired, red-eye reduction mode, return light detected",M[73]="Flash fired, compulsory flash mode, red-eye reduction mode",M[77]="Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",M[79]="Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",M[89]="Flash fired, auto mode, red-eye reduction mode",
M[93]="Flash fired, auto mode, return light not detected, red-eye reduction mode",M[95]="Flash fired, auto mode, return light detected, red-eye reduction mode",M),SensingMethod:(N[1]="Not defined",N[2]="One-chip color area sensor",N[3]="Two-chip color area sensor",N[4]="Three-chip color area sensor",N[5]="Color sequential area sensor",N[7]="Trilinear sensor",N[8]="Color sequential linear sensor",N),SceneCaptureType:(O[0]="Standard",O[1]="Landscape",O[2]="Portrait",O[3]="Night scene",O),SceneType:(Ja[1]=
"Directly photographed",Ja),CustomRendered:(Ka[0]="Normal process",Ka[1]="Custom process",Ka),WhiteBalance:(La[0]="Auto white balance",La[1]="Manual white balance",La),GainControl:(P[0]="None",P[1]="Low gain up",P[2]="High gain up",P[3]="Low gain down",P[4]="High gain down",P),Contrast:(Q[0]="Normal",Q[1]="Soft",Q[2]="Hard",Q),Saturation:(R[0]="Normal",R[1]="Low saturation",R[2]="High saturation",R),Sharpness:(S[0]="Normal",S[1]="Soft",S[2]="Hard",S),SubjectDistanceRange:(T[0]="Unknown",T[1]="Macro",
T[2]="Close view",T[3]="Distant view",T),FileSource:(Ma[3]="DSC",Ma),Components:(U[0]="",U[1]="Y",U[2]="Cb",U[3]="Cr",U[4]="R",U[5]="G",U[6]="B",U)};function V(){var a=A.call(this)||this;a.state={count:3};a.a=null;return a}t(V,A);V.prototype.componentDidMount=function(){var a=this;this.a=setInterval(function(){var b=a.state.count+1;3<b&&(b=0);a.setState({count:b})},250)};V.prototype.componentWillUnmount=function(){clearInterval(this.a)};V.prototype.render=function(){var a=".".repeat(this.state.count),b=".".repeat(3-this.state.count);return z("span",{},a,z("span",{style:"opacity:0"},b))};function W(){var a=A.call(this)||this;a.state={l:!1,progress:null,error:null,o:null,result:null};a.a=a.a.bind(a);return a}t(W,A);W.prototype.componentDidMount=function(){Na(this,this.props.file);Oa(this,this.props.file)};
function Oa(a,b){var c=new FileReader;c.readAsArrayBuffer(b);c.onload=function(){var f=c.result;a:{var e={parseDates:!0};var k=new DataView(f);if(255!=k.getUint8(0)||216!=k.getUint8(1))e=!1;else{for(var d=f.byteLength,h=2,g;h<d;){if(255!=k.getUint8(h)){e=!1;break a}g=k.getUint8(h+1);if(225==g){e=Ia(k,h+4,e);break a}h+=2+k.getUint16(h+2)}e=void 0}}a:if(k=new DataView(f),255!=k.getUint8(0)||216!=k.getUint8(1))f=!1;else{d=2;for(h=f.byteLength;d<h;){g=d;if(56===k.getUint8(g)&&66===k.getUint8(g+1)&&73===
k.getUint8(g+2)&&77===k.getUint8(g+3)&&4===k.getUint8(g+4)&&4===k.getUint8(g+5)){g=k.getUint8(d+7);0!==g%2&&(g+=1);0===g&&(g=4);h=d+8+g;d=k.getUint16(d+6+g);k=h;f=new DataView(f);h={};for(g=k;g<k+d;){if(28===f.getUint8(g)&&2===f.getUint8(g+1)){var l=f.getUint8(g+2);if(l in Ca){var n=f.getInt16(g+3);l=Ca[l];n=Aa(f,g+5,n);h.hasOwnProperty(l)?h[l]instanceof Array?h[l].push(n):h[l]=[h[l],n]:h[l]=n}}g++}f=h;break a}d++}f=void 0}a.setState({G:{data:e,iptcdata:f}})}}
function Na(a,b){var c=new FileReader;c.readAsDataURL(b);c.onload=function(){Pa(a,c.result)}}function Pa(a,b){var c=new Image;c.src=b;c.onload=function(){var f=c.width/c.height;f=c.width>c.height?250*f:250/f;var e=document.createElement("canvas");e.width=f;e.height=250;e.getContext("2d").drawImage(c,0,0,e.width,e.height);f=e.toDataURL();a.setState({o:f})}}
W.prototype.upload=function(){var a=this,b,c;return xa(function(f){b=a.props;c=void 0===b.uploadUri?"/upload-asset":b.uploadUri;a.setState({error:null,progress:0,l:!1});return f.return(Qa(a,c))})};
function Qa(a,b){var c,f,e,k;return xa(function(d){c=a.props;f=c.file;e=new FormData;e.append("image",f);k=new XMLHttpRequest;k.open("POST",b+"&name="+f.name,!0);k.a=0;k.upload.addEventListener("progress",function(h){a.setState({progress:100*h.loaded/h.total||100})});k.addEventListener("readystatechange",function(){4==k.readyState&&a.setState({l:!0,progress:null});if(4==k.readyState&&200==k.status){var h=k.responseText;try{var g=JSON.parse(h);var l=g.error;var n=g.result;var u=g.photoId}catch(x){l=
"Could not parse JSON: "+x.message}l?a.setState({error:l}):n&&(a.setState({result:n,o:null,J:u}),a.props.s&&a.props.s(n))}else if(4==k.readyState&&200!=k.status){h="XHR Error";try{h=JSON.parse(k.responseText).error}catch(x){}a.setState({error:h})}});k.send(e);d.f=0})}W.prototype.a=function(a){a.preventDefault();this.upload();return!1};
W.prototype.render=function(a){var b=a.name,c=a.onRemove,f=a.uploadedResults;a=void 0===a.K?"photos[]":a.K;var e=this.context.LOCALE,k=this.state,d=k.progress,h=k.error,g=k.o,l=k.l,n=k.result,u=k.G,x=k.J;k=100==d&&!l;f=x&&f.some(function(G){return G==x});f=n&&!f;g=n||g;try{var y=u.data.DateTime;y=y.toLocaleString()}catch(G){}return z(Ra,{error:h,C:f,M:k,src:g,l:l},z("div",{className:"Image"},!g&&z("span",{className:"PreviewLoadingSpan"},e.previewLoading,"..."),z("img",{src:g}),z("span",{className:"ImageInfo",
style:"top:0;left:0;"},b,y&&z("br"),y),z("span",{onClick:c,className:"ImageInfo CloseSpan"},"\u2715"),!n&&!h&&null===d&&z(Sa,{style:"background:transparent; padding-left:0;"},z("a",{onClick:this.a,className:"btn btn-light btn-sm"},e.upload)),null!==d&&100!=d&&z(Sa,{},z("progress",{max:100,value:d})),k&&z(Sa,{},e.serverProcessing,z(V),z("div",{className:"spinner-border text-primary",role:"status"},z("span",{className:"sr-only"},"Loading..."))),h&&z("p",{className:"ImageInfo PhotoError"},e.error,": ",
h),h&&z("a",{onClick:this.a,href:"#",className:"btn btn-danger btn-sm",style:"position:absolute;right:0;bottom:0;"},e.uploadAgain),n&&z("p",{className:"ImageInfo GalleryLink"},z("a",{href:n,rel:"noopener noreferrer",target:"_blank"},e.link)),f&&x&&z("input",{name:a,type:"hidden",value:x})))};
function Ra(a){var b=a.children,c=a.error,f=a.C,e=a.l,k=a.src,d="Added";a.M?d="Uploading":c?d="Error":f?d="HasInput":e&&(d="Uploaded");a=["ImageCopy","PhotoUploader"+d].concat(p(k?[]:["PreviewLoading"])).join(" ");return z("div",{className:a},b)}function Sa(a){return z("span",{className:void 0===a.className?"ImageInfo":a.className,style:"bottom:0;left:0;"+(void 0===a.style?"":a.style)},a.children)};var X=".PhotoUploader .ImageCopy.PhotoUploaderAdded {\n  background: linear-gradient(lightgrey, grey);\n  border-color: #838383;\n  box-shadow: rgb(98, 98, 98) 1px -5px 15px inset;\n}\n.PhotoUploader .ImageCopy.PhotoUploaderHasInput {\n  background: linear-gradient(yellow, rgb(207, 198, 92));\n  border-color: rgb(156, 158, 9);\n  box-shadow: inset 1px -5px 15px #9e7414;\n}\n.PhotoUploader .ImageCopy.PhotoUploaderError {\n  background: linear-gradient(coral, brown);\n  border-color: red;\n  box-shadow: rgb(162, 31, 31) 1px -5px 15px inset\n}\n.PhotoUploader .ImageCopy.PhotoUploaderUploaded {\n  background: linear-gradient(lightgreen, #82d285);\n  border-color: green;\n  box-shadow: inset 1px -5px 15px #6f9e14;\n}\n.PhotoUploader .ImageCopy.PhotoUploaderUploading {\n  background: linear-gradient(lightblue, blue);\n  border-color: blue;\n  box-shadow: inset 1px -5px 15px #2a33a0;\n}\n\n.PhotoUploader .ImageInfo {\n  background: rgba(255, 255, 255, 0.75);\n  word-break: break-all;\n  max-width: 100%;\n  overflow: scroll;\n  position: absolute;\n  margin: 0;\n  /* margin-left: .5rem; */\n  /* margin-right: .5rem; */\n  padding-left: .25rem;\n  padding-right: .25rem;\n}\n.ImageInfo.PhotoError {\n  background: rgba(156, 66, 60, 0.63);\n  border-color: red;\n  color: navajowhite;\n  text-shadow: 1px 1px brown;\n  bottom: 0;\n  left: 0;\n}\n.PhotoError:hover {\n  z-index: 5;\n}\n.PreviewLoading {\n  width: 290px;\n}\n.PhotoUploader .GalleryLink {\n  bottom: 0;\n  left: 0;\n  padding-left: .25rem;\n  padding-right: .25rem;\n}\n/* .PhotoUploader .Image {\n  padding: .5rem;\n} */\n.PhotoUploader .ImageCopy {\n  padding: .5rem;\n  border: 1px solid grey;\n  background: #cecece;\n  display: inline-block;\n  border-radius: 5px;\n  margin: .25rem;\n  height: 200px;\n  vertical-align: top;\n}\n.PhotoUploader .Image img {\n  max-width: 100%;\n  max-height: 100%;\n  border-radius: 3px;\n  transition: .5s;\n}\n.PhotoUploader .Image:hover img {\n  box-shadow: 0 0 19px 1px white;\n}\n.PhotoUploaderHasInput:hover img {\n  box-shadow: 0 0 19px 1px #ecff4a;\n}\n.PhotoUploaderUploading:hover img {\n  box-shadow: 0 0 19px 1px lightblue;\n}\n.PhotoUploaderError:hover img {\n  box-shadow: 0 0 19px 1px lightsalmon;\n}\n.PhotoUploaderUploaded:hover img {\n  box-shadow: 0 0 19px 1px lightgreen;\n}\n.PhotoLoadingPlaceholder {\n  background:lightgrey;\n  text-align: center;\n}\n.PhotoUploader .Image .CloseSpan {\n  top: 0;\n  right: 0;\n  padding: 5px;\n  cursor: pointer;\n  border-radius: 5px;\n  width: 1.5rem;\n  height: 2rem;\n  overflow: hidden;\n  text-align: center;\n  /* transition: .5s; */\n}\n.PhotoUploader .Image {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.PhotoUploader .PreviewLoadingSpan {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: rgba(255, 255, 255, 0.75);\n  padding: .5rem;\n  text-align: center;\n  white-space: nowrap;\n}";
X=void 0===X?"":X;var Ta=document.head,Y=document.createElement("style");Y.type="text/css";Y.styleSheet?Y.styleSheet.cssText=X:Y.appendChild(document.createTextNode(X));Ta.appendChild(Y);var Ua={RU_LOCALE:{recognition:"\u0418\u0434\u0435\u0442 \u043e\u043f\u043e\u0437\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u043e\u0432...",drop:"\u0418\u043b\u0438 \u043f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u0435 \u0444\u0430\u0439\u043b\u044b \u0441\u044e\u0434\u0430...",previewLoading:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043f\u0440\u0435\u0432\u044c\u044e",upload:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c",uploadAgain:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043d\u043e\u0432\u0430",
link:"\u0421\u0441\u044b\u043b\u043a\u0430",error:"\u041e\u0448\u0438\u0431\u043a\u0430",serverProcessing:"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430"},EN_LOCALE:{recognition:"Preprocessing files...",drop:"Or drag and drop files here...",previewLoading:"Loading preview",upload:"Upload",uploadAgain:"Upload again",link:"Link",error:"Error",serverProcessing:"Server processing"}};
function Z(){var a=A.call(this)||this;a.state={files:[]};a.props=a.props;return a}t(Z,A);function Va(a,b){var c=a.state.files.filter(function(f){return f.file!==b});a.setState({files:c});if(a.props.onRemove)a.props.onRemove(b)}function Wa(a,b){var c,f,e;xa(function(k){c=m(b);f=ca(c);e=f.map(function(d){return{file:d,L:Math.floor(1E4*Math.random())}});a.setState({files:p(a.state.files).concat(p(e))});if(a.props.onAdded)a.props.onAdded();k.f=0})}Z.prototype.getChildContext=function(){return{LOCALE:this.LOCALE}};
Z.prototype.render=function(a){var b=this,c=void 0===a.fieldName?"files[]":a.fieldName,f=a.onPhotoUploaded,e=a.uploadedResults,k=a.uploadUri;a=this.LOCALE;if(!a)return z("div",{},"Photo Uploader Error: Unknown Locale");var d=this.context,h=0;return z("div",{onDragEnter:function(g){g.preventDefault();h++;g.currentTarget.style.background="#E91E63"},className:"PhotoUploader",onDragLeave:function(g){h--;0==h&&(g.currentTarget.style.background="")},onDrop:function(g){g.preventDefault();g.stopPropagation();
g.currentTarget.style.background="";Wa(b,g.dataTransfer.files)},onDragOver:function(g){g.preventDefault();g.stopPropagation()}},z("input",{id:d.id,"aria-described-by":d.S,onChange:function(g){g.preventDefault();Wa(b,g.currentTarget.files);g.currentTarget.value=null},accept:"image/*",type:"file",multiple:!0}),this.state.R?a.recognition:a.drop,z("br"),this.state.files.map(function(g){var l=g.file;return z(W,{uploadUri:k,key:g.L,name:l.name,file:l,onRemove:function(){Va(b,l)},fieldName:c,s:f,uploadedResults:e})}))};
v.Object.defineProperties(Z.prototype,{LOCALE:{configurable:!0,enumerable:!0,get:function(){var a=this.props,b=void 0===a.locale?"en":a.locale;(a=a.LOCALE)||(a=Ua[b.toUpperCase()+"_LOCALE"]);return a}}});za(z(Z),window.container);}).call(this);

//# sourceMappingURL=photo-uploader.js.map